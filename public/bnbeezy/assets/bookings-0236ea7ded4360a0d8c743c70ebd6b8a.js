(function(){var e;e=function(){function t(){}var e;return t.prototype.init=function(){},t.prototype.index=function(){return $("#calendar").fullCalendar({header:{left:"prev,next today",center:"title"},defaultView:"month",height:600,slotMinutes:15,eventSources:[{url:"/events",ignoreTimezone:!1}],timeFormat:"h:mm t{ - h:mm t} ",dragOpacity:"0.5",eventClick:function(e,t,n){return AjaxHelper.read({url:e.url,response:"script"}),!1},dayClick:function(e,t,n,r){return e<Date.today()?($("#calendar").fullCalendar("today"),bootbox.alert("The selected date is invalid, date must be today or greater.")):window.location.href=Utilities.addParametersToURL($("#new_booking_path").val(),"date",e),!1}})},t.prototype["new"]=function(){return e()},t.prototype.edit=function(){return e()},t.prototype.show_invoice=function(){return $(".best_in_place").best_in_place(),$("#line_items").on("ajax:success",".best_in_place",function(){return AjaxHelper.read({url:$("#booking_total_path").val(),response:"script"})})},e=function(){return $("input.datepicker").each(function(e){return $(this).datepicker({dateFormat:"DD, d MM yy",altFormat:"yy-mm-dd",altField:$(this).next(),minDate:Date.today(),onSelect:function(e,t){var n;return n=$(this).data("previous-value"),(new Date(n)).getTime()!==(new Date(e)).getTime()&&$("#room_finder").trigger("click"),$(this).data("previous-value",$(this).val()),t.id==="booking_event_attributes_start_at"?$("#booking_event_attributes_end_at").datepicker("option","minDate",e):$("#booking_event_attributes_start_at").datepicker("option","maxDate",e)}})}),$("#booking_guest_id").select2({width:"element",placeholder:"Search for a guest"}),$("#guest").on("cocoon:before-insert",function(){return $("#find_guest").remove(),$("#guest a.add_fields").hide()}),$("#rooms").on("click","#room_finder",function(){return AjaxHelper.read({url:$(this).attr("href"),params:{start_at:$("#booking_event_attributes_start_at").datepicker("getDate"),end_at:$("#booking_event_attributes_end_at").datepicker("getDate")},response:"script"}),!1})},t}(),this.BnBEezy.bookings=new e}).call(this);