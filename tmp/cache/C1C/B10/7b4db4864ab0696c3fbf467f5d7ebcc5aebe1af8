o: ActiveSupport::Cache::Entry	:@compressedF:@expires_in0:@created_atf1352198602.662878:@value"E[I"7(function() {
  var createBooking2, setMinMaxDate, showBooking2, updateEvent;

  $(document).ready(function() {
    return $("input.datepicker").each(function(i) {
      return $(this).datepicker({
        dateFormat: "DD, d MM yy",
        altFormat: "yy-mm-dd",
        altField: $(this).next(),
        minDate: 0,
        onClose: function(dateText, inst) {
          return setMinMaxDate(inst, dateText);
        }
      });
    });
  });

  window.onload = function() {
    return $('#calendar').fullCalendar({
      editable: true,
      header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
      },
      defaultView: 'month',
      height: 500,
      slotMinutes: 15,
      eventSources: [
        {
          url: /events/,
          ignoreTimezone: false
        }
      ],
      timeFormat: 'h:mm t{ - h:mm t} ',
      dragOpacity: "0.5",
      eventDrop: function(event, dayDelta, minuteDelta, allDay, revertFunc) {
        return updateEvent(event);
      },
      eventResize: function(event, dayDelta, minuteDelta, revertFunc) {
        return updateEvent(event);
      },
      eventClick: function(calEvent, jsEvent, view) {
        showBooking2(calEvent);
        return false;
      },
      dayClick: function(date, allDay, jsEvent, view) {
        createBooking2(date);
        return false;
      }
    });
  };

  setMinMaxDate = function(element, dateText) {
    if (element.id === 'booking_event_attributes_start_at') {
      return $('#booking_event_attributes_end_at').datepicker("option", "minDate", dateText);
    } else {
      return $('#booking_event_attributes_start_at').datepicker("option", "maxDate", dateText);
    }
  };

  $('#room_finder').live('click', function() {
    $(this).attr('href', $(this).attr('href') + '?start_date=' + $('#booking_event_attributes_start_at').val());
    $(this).attr('href', $(this).attr('href') + '&end_date=' + $('#booking_event_attributes_end_at').val());
    $.ajax({
      type: 'GET',
      url: $(this).attr('href'),
      dataType: 'script'
    });
    return false;
  });

  $('#guest').live('cocoon:before-insert', function() {
    $("#find_guest").remove();
    return $("#guest a.add_fields").hide();
  });

  updateEvent = function(the_event) {
    return $.ajax({
      type: 'PUT',
      data: {
        start_at: the_event.start,
        end_at: the_event.end
      },
      url: the_event.update_url,
      dataType: 'json'
    });
  };

  showBooking2 = function(the_event) {
    return $.ajax({
      type: 'GET',
      url: the_event.url,
      dataType: 'script'
    });
  };

  createBooking2 = function(date) {
    var path;
    path = $('#new_booking_path').val();
    return $.ajax({
      data: {
        date: date
      },
      type: 'GET',
      url: path,
      dataType: 'script'
    });
  };

}).call(this);
:ET