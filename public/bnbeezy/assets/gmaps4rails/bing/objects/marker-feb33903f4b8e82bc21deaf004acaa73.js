(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.Gmaps4Rails.Bing.Marker=function(e){function n(e,t){var n,r;this.controller=t,r=this.createLatLng(e.lat,e.lng),n=this._createImageAnchorPosition([e.lat,e.lng]),e.marker_picture!=null?this.serviceObject=new Microsoft.Maps.Pushpin(r,{draggable:e.marker_draggable,anchor:n,icon:e.marker_picture,height:e.marker_height,text:e.marker_title,width:e.marker_width}):this.serviceObject=new Microsoft.Maps.Pushpin(r,{draggable:e.marker_draggable,anchor:n,text:e.marker_title}),this._addToMap(this.serviceObject)}return t(n,e),n.include(Gmaps4Rails.Interfaces.Marker),n.include(Gmaps4Rails.Bing.Shared),n.include(Gmaps4Rails.Marker.Instance),n.extend(Gmaps4Rails.Marker.Class),n.extend(Gmaps4Rails.Configuration),n.CONF={infobox:"description"},n.prototype.createInfoWindow=function(){if(this.description!=null)return this.controller.markers_conf.infobox==="description"?this.info_window=new Microsoft.Maps.Infobox(this.serviceObject.getLocation(),{description:this.description,visible:!1,showCloseButton:!0}):this.info_window=new Microsoft.Maps.Infobox(this.serviceObject.getLocation(),{htmlContent:this.description,visible:!1}),Microsoft.Maps.Events.addHandler(this.serviceObject,"click",this._openInfoWindow(this.controller,this.info_window)),this._addToMap(this.info_window)},n.prototype.isVisible=function(){return!0},n.prototype.clear=function(){return this._removeFromMap(this.serviceObject)},n.prototype.show=function(){return this.serviceObject.setOptions({visible:!0})},n.prototype.hide=function(){return this.serviceObject.setOptions({visible:!1})},n.prototype._openInfoWindow=function(e,t){return function(){return e.visibleInfoWindow&&e.visibleInfoWindow.setOptions({visible:!1}),t.setOptions({visible:!0}),e.visibleInfoWindow=t}},n.prototype._createImageAnchorPosition=function(e){return e==null?null:this.createPoint(e[0],e[1])},n}(Gmaps4Rails.Common)}).call(this);