(function(){Gmaps4Rails.Bing={},Gmaps4Rails.Bing.Shared={createPoint:function(e,t){return new Microsoft.Maps.Point(e,t)},createLatLng:function(e,t){return new Microsoft.Maps.Location(e,t)},createLatLngBounds:function(){},createSize:function(e,t){return new google.maps.Size(e,t)},_addToMap:function(e){return this.controller.getMapObject().entities.push(e)},_removeFromMap:function(e){return this.controller.getMapObject().entities.remove(e)}}}).call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.Gmaps4Rails.Bing.Map=function(e){function n(e,t){var n,r,i;this.controller=t,r=this.setConf(),this.options=this.mergeObjects(e,r),n={credentials:this.options.provider_key,mapTypeId:this._getMapType(this.options),center:this.createLatLng(this.options.center_latitude,this.options.center_longitude),zoom:this.options.zoom},i=this.mergeObjects(e.raw,n),this.serviceObject=new Microsoft.Maps.Map(document.getElementById(this.options.id),i)}return t(n,e),n.include(Gmaps4Rails.Interfaces.Map),n.include(Gmaps4Rails.Map),n.include(Gmaps4Rails.Bing.Shared),n.include(Gmaps4Rails.Configuration),n.prototype.CONF={type:"road"},n.prototype.extendBoundsWithMarkers=function(){var e,t,n,r,i;e=[],i=this.controller.markers;for(n=0,r=i.length;n<r;n++)t=i[n],e.push(t.serviceObject.getLocation());return this.boundsObject=Microsoft.Maps.LocationRect.fromLocations(e)},n.prototype.extendBoundsWithPolyline=function(e){},n.prototype.extendBoundsWithPolygon=function(e){},n.prototype.extendBoundsWithCircle=function(e){},n.prototype.extendBound=function(e){},n.prototype.adaptToBounds=function(){return this._fitBounds()},n.prototype.centerMapOnUser=function(e){return this.serviceObject.setView({center:e})},n.prototype._fitBounds=function(){return this.serviceObject.setView({bounds:this.boundsObject})},n.prototype._getMapType=function(e){switch(e.type){case"road":return Microsoft.Maps.MapTypeId.road;case"aerial":return Microsoft.Maps.MapTypeId.aerial;case"auto":return Microsoft.Maps.MapTypeId.auto;case"birdseye":return Microsoft.Maps.MapTypeId.birdseye;case"collinsBart":return Microsoft.Maps.MapTypeId.collinsBart;case"mercator":return Microsoft.Maps.MapTypeId.mercator;case"ordnanceSurvey":return Microsoft.Maps.MapTypeId.ordnanceSurvey;default:return Microsoft.Maps.MapTypeId.auto}},n}(Gmaps4Rails.Common)}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.Gmaps4Rails.Bing.Marker=function(e){function n(e,t){var n,r;this.controller=t,r=this.createLatLng(e.lat,e.lng),n=this._createImageAnchorPosition([e.lat,e.lng]),e.marker_picture!=null?this.serviceObject=new Microsoft.Maps.Pushpin(r,{draggable:e.marker_draggable,anchor:n,icon:e.marker_picture,height:e.marker_height,text:e.marker_title,width:e.marker_width}):this.serviceObject=new Microsoft.Maps.Pushpin(r,{draggable:e.marker_draggable,anchor:n,text:e.marker_title}),this._addToMap(this.serviceObject)}return t(n,e),n.include(Gmaps4Rails.Interfaces.Marker),n.include(Gmaps4Rails.Bing.Shared),n.include(Gmaps4Rails.Marker.Instance),n.extend(Gmaps4Rails.Marker.Class),n.extend(Gmaps4Rails.Configuration),n.CONF={infobox:"description"},n.prototype.createInfoWindow=function(){if(this.description!=null)return this.controller.markers_conf.infobox==="description"?this.info_window=new Microsoft.Maps.Infobox(this.serviceObject.getLocation(),{description:this.description,visible:!1,showCloseButton:!0}):this.info_window=new Microsoft.Maps.Infobox(this.serviceObject.getLocation(),{htmlContent:this.description,visible:!1}),Microsoft.Maps.Events.addHandler(this.serviceObject,"click",this._openInfoWindow(this.controller,this.info_window)),this._addToMap(this.info_window)},n.prototype.isVisible=function(){return!0},n.prototype.clear=function(){return this._removeFromMap(this.serviceObject)},n.prototype.show=function(){return this.serviceObject.setOptions({visible:!0})},n.prototype.hide=function(){return this.serviceObject.setOptions({visible:!1})},n.prototype._openInfoWindow=function(e,t){return function(){return e.visibleInfoWindow&&e.visibleInfoWindow.setOptions({visible:!1}),t.setOptions({visible:!0}),e.visibleInfoWindow=t}},n.prototype._createImageAnchorPosition=function(e){return e==null?null:this.createPoint(e[0],e[1])},n}(Gmaps4Rails.Common)}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.Gmaps4RailsBing=function(e){function n(){n.__super__.constructor.apply(this,arguments)}return t(n,e),n.include(Gmaps4Rails.Bing.Shared),n.prototype.getModule=function(){return Gmaps4Rails.Bing},n.prototype.createClusterer=function(e){},n.prototype.clearClusterer=function(){},n.prototype.clearMarkers=function(){},n}(Gmaps4Rails.BaseController)}.call(this),function(){}.call(this);