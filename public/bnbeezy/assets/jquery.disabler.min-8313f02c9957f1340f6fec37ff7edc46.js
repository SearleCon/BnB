(function(e,t){var n="hasDisabler",r="disabler-ignore-readonly",i="disabler-hide-readonly",s="disabler-show-text-readonly",o="panels-date-picker",u="disabler-read-only-text",a="disabler-read-only-display-as-text",f="data-disabler-read-only",l="disabler-hidden-inputs",c="data-disabler-anchor-href",h="disabler-saved-events",p="data-disabler-read-only-display";e.widget("dtg.disabler",{options:{disable:!1,readonly:!1,expression:"*:not(.disabler-ignore-readonly)",disabledClass:"ui-state-disabled"},_create:function(){this._initOptions(),this.options.disable&&this._setOption("disable",this.options.disable),this.options.readonly&&this._setOption("readonly",this.options.readonly),this.element.hasClass(n)||this.element.addClass(n)},_initOptions:function(){this.options.disable=this._ensureBoolean(this.options.disable),this.options.readonly=this._ensureBoolean(this.options.readonly)},_ensureBoolean:function(e){var t=!1;if(this._isNotNullAndNotUndefined(e)){var n=(new String(e)).toLowerCase();t=n==="true"}return t},_setOption:function(e,t){this._initOptions(),this.options[e]=t;var n=this.element.attr("id");switch(e){case"disable":this._doDisable(n,t);break;case"readonly":this.readOnly(n,this.options.readonly)}},_getId:function(t){return this._isNullOrUndefined(t)&&(t=this.element.attr("id")),this._isNotNullAndNotUndefined(t)&&(t=e.trim(t),t.length===0&&(t=null)),t},enable:function(e){e=this._getId(e);if(this._isNullOrUndefined(e))return;this._doDisable(e,!1)},disable:function(e){e=this._getId(e);if(this._isNullOrUndefined(e))return;this._doDisable(e,!0)},_doDisable:function(t,n){var r=this._escape(t),i=e.Event("beforeDisable");this._trigger("beforeDisable",i,{containerId:r,disabling:n,element:this.element});if(i.isDefaultPrevented())return;this._readOnlyForDisable(t,n),this.options.disable=n;var s=e.Event("afterDisable");this._trigger("afterDisable",s,{containerId:r,disabling:n,element:this.element}),this.options.disable=n},_readOnlyForDisable:function(e,t){e=this._getId(e);if(this._isNullOrUndefined(e))return;t=this._defaultReadOnlyFlag(t),this._doReadOnly(e,t,!0)},readOnly:function(e,t){e=this._getId(e);if(this._isNullOrUndefined(e))return;t=this._defaultReadOnlyFlag(t),this._doReadOnly(e,t,!1)},_defaultReadOnlyFlag:function(e){return e===t&&(e=!0),e},_doReadOnly:function(n,r,s){var o=this._escape(n),a=e.Event("beforeReadOnly");this._trigger("beforeReadOnly",a,{containerId:o,readOnlyFlag:r,disabling:s,element:this.element});if(a.isDefaultPrevented()||r===t)return;var f=[],l=this._formatSelectorForContainerId(o),c=e(l);if(c.length===0)return;this._doReadOnlyIteration(c,r,f,s);var h=this,l=this.options.expression+", span."+u+", ."+i;c.find(l).each(function(n){var i=e(this),u=e.Event("readOnlyIteration");h._trigger("readOnlyIteration",u,{input:i,index:n,containerId:o,readOnlyFlag:r,disabling:s,element:h.element});if(u.isDefaultPrevented())return!0;var a=i.data("disabler");if(a!==t)return!0;h._doReadOnlyIteration(i,r,f,s)}),this._processHiddenInputsOnReadOnly(o,r,f),this.options.readonly=r;var p=e.Event("afterReadOnly");this._trigger("afterReadOnly",p,{containerId:o,readOnlyFlag:r,disabling:s,element:this.element})},_whatTypeAmI:function(e){var n=e.attr("type");return n===t&&(e[0]===t?n="":n=e[0].tagName),n.toLowerCase()},_doReadOnlyIteration:function(e,t,n,r){t?this._turnReadOnlyOn(e,n,r):this._turnReadOnlyOff(e)},_turnReadOnlyOn:function(n,u,a){if(this._hasAttribute(n,f))return;if(n.attr("readonly")!==t||n.attr("disabled")!==t)return;if((n.hasClass("hasDatepicker")||n.hasClass(o))&&n.datepicker("option","disabled"))return;this._setAttribute(n,f,"true");if(n.hasClass(r))return;var l=this._whatTypeAmI(n);if(!a){if(n.hasClass(i)){this._disableEvents(n),u.push(n),n.hide();return}if(n.hasClass(s)){this._disableEvents(n),this._showTextReadOnly(n,l);return}}var c=e.Event("turnReadOnlyOn");this._trigger("turnReadOnlyOn",c,n);if(c.isDefaultPrevented())return;n.data("accordion")===t&&(n.data("progressbar")!==t?n.progressbar("disable"):n.data("slider")!==t?n.slider("disable"):n.data("spinner")!==t?n.spinner("disable"):n.data("tabs")!==t?n.tabs("disable"):n.data("menu")!==t?n.menu("disable"):n.data("datapicker")||n.hasClass(o)?n.datepicker("disable"):l==="a"?this._disableLink(n):l==="submit"||l=="button"||l=="label"?n.hasClass("ui-button")?n.button("disable"):l==="label"?n.addClass(this.options.disabledClass):n.attr("disabled","true"):l==="select"||l=="checkbox"||l=="radio"?(this._disableEvents(n),n.attr("disabled","true"),n.addClass(this.options.disabledClass)):l==="text"||l==="textarea"?(n.attr("readonly","readonly"),n.attr("disabled","true"),n.addClass(this.options.disabledClass)):this._disableEvents(n))},_showTextReadOnly:function(t,n){var r=e.Event("showTextReadOnly");this._trigger("showTextReadOnly",r,t);if(r.isDefaultPrevented())return;var i=this,s="",o="";if(n==="a")o=this._getTextForInput(t,t.text());else if(n==="text"||n==="textarea")o=this._getTextForInput(t,t.val());else if(n==="radio"||n==="checkbox")t.prop("checked")&&(o=this._getTextForInput(t,t.val()));else if(n==="select"){var l=[];t.find("option:selected").each(function(t){var n=e(this),r=i._getTextForSelectOption(n);l.push(r)}),o=l.join(", ")}t.wrap('<span class="'+u+'"></span>'),this._setAttribute(t.parent("span."+u),f,"true");var c="";e.trim(o).length===0&&(c='style="display: none; "'),t.parent().after('<span class="'+a+'" '+c+">"+o+"</span>"),t.hide()},_getTextForInput:function(e,n){var r=this._getAttribute(e,p);return r===t&&(r=n),overrideText=this._getAttribute(e.parent(),p),overrideText!==t&&(r=overrideText),r},_getTextForSelectOption:function(e){var n=this._getAttribute(e,p);return n===t&&(n=e.text()),n},_turnReadOnlyOff:function(n){if(this._hasNoAttribute(n,f))return;this._removeAttribute(n,f);if(n.hasClass(u)){var r=e.Event("undoShowTextReadOnly");this._trigger("undoShowTextReadOnly",r,n);if(!r.isDefaultPrevented()){var i=n.next("span."+a);i.remove();var s=n.children();s.unwrap(),this._enableEvents(s),s.show()}}else{var l=e.Event("turnReadOnlyOff");this._trigger("turnReadOnlyOff",l,n);if(!l.isDefaultPrevented()){var c=this._whatTypeAmI(n);n.data("accordion")===t&&(n.data("progressbar")!==t?n.progressbar("enable"):n.data("slider")!==t?n.slider("enable"):n.data("spinner")!==t?n.spinner("enable"):n.data("tabs")!==t?n.tabs("enable"):n.data("menu")!==t?n.menu("enable"):n.data("datapicker")||n.hasClass(o)?n.datepicker("enable"):c==="a"?this._enableLink(n):c==="submit"||c=="button"||c=="label"?n.hasClass("ui-button")?n.button("enable"):c==="label"?n.removeClass(this.options.disabledClass):n.removeAttr("disabled"):c==="select"||c=="checkbox"||c=="radio"?(this._enableEvents(n),n.removeAttr("disabled"),n.removeClass(this.options.disabledClass)):c==="text"||c==="textarea"?(n.removeAttr("readonly"),n.removeAttr("disabled"),n.removeClass(this.options.disabledClass)):this._enableEvents(n))}}},_processHiddenInputsOnReadOnly:function(n,r,i){var s=this._escapeValue(this.element.attr("id"));if(r){i.length>0&&e("#"+s).data(l,i);var o=e.Event("processHiddenInputsReadOnly");this._trigger("processHiddenInputsReadOnly",o,{containerId:s,hiddenInput:a,element:this.element})}else{i=e("#"+s).data(l);if(i!==t){for(var u=0;u<i.length;u++){var a=i[u];this._enableEvents(a),a.show();var f=e.Event("processHiddenInputsNotReadOnlyIteration");this._trigger("processHiddenInputsNotReadOnlyIteration",f,{containerId:s,hiddenInput:a,element:this.element})}e("#"+s).removeData(l)}}},_disableLink:function(e){this._disableEvents(e);var n=e.attr("href");n!==t&&(this._setAttribute(e,c,n),e.attr("href","#")),e.on("click",function(e){e.preventDefault()}),e.addClass(this.options.disabledClass)},_disableEvents:function(n){var r=e.Event("disableEvents");this._trigger("disableEvents",r,n);if(r.isDefaultPrevented())return;var i=this.widgetEventPrefix,s=n.data("events");if(s!==t){var o=[];e.each(s,function(r,s){e.each(s,function(e){var u=s[e];if(u!==t){var a={eventName:r,handler:u};r.indexOf(i)<0&&(o.push(a),n.unbind(r))}})}),n.data(h,o)}},_enableLink:function(e){e.unbind(),this._enableEvents(e);var n=this._getAttribute(e,c);n!==t&&(e.attr("href",n),this._removeAttribute(e,c)),e.removeClass(this.options.disabledClass)},_enableEvents:function(n){var r=e.Event("enableEvents");this._trigger("enableEvents",r,n);if(r.isDefaultPrevented())return;var i=n.data(h);i!==t&&e.each(i,function(e){var t=i[e],r=t.eventName,s=t.handler;n.on(r,s)}),n.removeData(h)},_escape:function(e){return e===t&&(e=this.element.attr("id")),this._escapeValue(e)},_escapeValue:function(e){return e=e.replace(/\+/g,"\\+"),e=e.replace(/\\/g,"\\"),e=e.replace(/\//g,"\\/"),e=e.replace(/!/g,"\\!"),e=e.replace(/"/g,'\\"'),e=e.replace(/#/g,"\\#"),e=e.replace(/\$/g,"\\$"),e=e.replace(/%/g,"\\%"),e=e.replace(/&/g,"\\&"),e=e.replace(/'/g,"\\'"),e=e.replace(/\(/g,"\\("),e=e.replace(/\)/g,"\\)"),e=e.replace(/\*/g,"\\*"),e=e.replace(/,/g,"\\,"),e=e.replace(/\./g,"\\."),e=e.replace(/:/g,"\\:"),e=e.replace(/;/g,"\\;"),e=e.replace(/\?/g,"\\?"),e=e.replace(/@/g,"\\@"),e=e.replace(/\[/g,"\\["),e=e.replace(/\]/g,"\\]"),e=e.replace(/\^/g,"\\^"),e=e.replace(/`/g,"\\`"),e=e.replace(/\{/g,"\\{"),e=e.replace(/\}/g,"\\}"),e=e.replace(/\|/g,"\\|"),e=e.replace(/\~/g,"\\~"),e},_isNotNullAndNotUndefined:function(e){return e!==t&&e!=null},_isNullOrUndefined:function(e){return e===null||e===t},_formatSelectorForContainerId:function(e){var t=this._escapeValue(this.element.attr("id"));t===e&&(e=null);var n="#"+e+" ";return this._isNullOrUndefined(e)&&(n=""),n===""?n="#"+t:n="#"+t+" "+n,n+" "},_hasAttribute:function(e,t){var n=e.attr(t);return typeof n!="undefined"&&n!==!1},_hasNoAttribute:function(e,t){return!this._hasAttribute(e,t)},_setAttribute:function(e,t,n){e.attr(t,n)},_removeAttribute:function(e,t){e.removeAttr(t)},_getAttribute:function(e,t){return e.attr(t)}}),e.extend(e.dtg.disabler,{version:"1.1.0"})})(jQuery);